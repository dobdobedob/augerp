<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="kr.happyjob.study.system.dao.NoticeDao">

	<!-- 그룹코드 목록 조회 -->
	<select id="listNoticeModel" resultType="kr.happyjob.study.system.model.NoticeModel">
		/*kr.happy.study.system.dao.NoticeDao.listNoticeModel*/
		  select ann_no
			     , loginID
			     , ann_title
			     , ann_con
			     , ann_cnt
			     , DATE_FORMAT(ann_date, '%Y-%m-%d') as ann_date
		   from tb_announce
		   <where>
		       <if test="(title != null) and (!title.equals(''))">
		            and ann_title like concat('%',#{title} ,'%')
		       </if>
		       <if test="(from_date != null) and (!from_date.equals(''))">
		            and ann_date <![CDATA[>=]]> STR_TO_DATE(#{from_date}, '%Y-%m-%d')  
		       </if>
		       <if test="(to_date != null) and (!to_date.equals(''))">
		            and ann_date <![CDATA[<=]]> STR_TO_DATE(#{to_date}, '%Y-%m-%d')  
		       </if>		    
		   </where> 
		  order by ann_date DESC
		   limit #{pageIndex}, #{pageSize}
	</select>
	
    <select id="totNoticeModel" resultType="int">
		/*kr.happy.study.system.dao.NoticeDao.totNoticeModel*/
		  select count(*)
		   from tb_announce
		   <where>
		       <if test="(title != null) and (!title.equals(''))">
		            and ann_title like concat('%',#{title} ,'%')
		       </if>
		       <if test="(from_date != null) and (!from_date.equals(''))">
		            and ann_date <![CDATA[>=]]> STR_TO_DATE(#{from_date}, '%Y-%m-%d')  
		       </if>
		       <if test="(to_date != null) and (!to_date.equals(''))">
		            and ann_date <![CDATA[<=]]> STR_TO_DATE(#{to_date}, '%Y-%m-%d')  
		       </if>		    
		   </where> 
	</select>		
	
	<select id="selectnotice" resultType="kr.happyjob.study.system.model.NoticeModel">
	      /*kr.happy.study.system.dao.NoticeDao.selectnotice*/
          select ann_no
			     , loginID
			     , ann_title
			     , ann_con
			     , ann_cnt
			     , DATE_FORMAT(ann_date, '%Y-%m-%d') as ann_date	      
	      from  tb_announce
	     where ann_no = #{ann_no}
	</select>
</mapper>